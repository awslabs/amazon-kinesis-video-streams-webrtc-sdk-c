cmake_minimum_required(VERSION 3.6.3)

project(libkvssdp NONE)

include(ExternalProject)
if (BUILD_STATIC_LIBS OR WIN32)
  set(LIBKVSSDP_SHARED_LIBS OFF)
else()
  set(LIBKVSSDP_SHARED_LIBS ON)
endif()

ExternalProject_Add(libkvssdp
    GIT_REPOSITORY    https://github.com/ActoryOu/amazon-kinesis-video-streams-sdp.git
    GIT_TAG           sdpCmake
    PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/build
    CMAKE_ARGS        
        -DCMAKE_INSTALL_PREFIX=${OPEN_SRC_INSTALL_PREFIX}
        -DCMAKE_C_FLAGS=${CMAKE_C_FLAGS} -DCMAKE_PROJECT_kvssdp_INCLUDE=${CMAKE_CURRENT_LIST_DIR}/../../src/source/Sdp/kvssdp/sdp.cmake
        -DBUILD_SHARED_LIBS=${LIBKVSSDP_SHARED_LIBS}
    BUILD_ALWAYS      TRUE
    TEST_COMMAND      ""
)
